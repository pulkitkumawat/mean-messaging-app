<nb-layout>
  <nb-layout-header fixed>
    <mat-toolbar
      ><span><a>Chat App</a></span>
      <span class="spacer"></span>
      <span><nb-search type="rotate-layout"></nb-search></span
    ></mat-toolbar>
  </nb-layout-header>

  <nb-sidebar
    ><nb-list>
      <nb-list-item
        *ngFor="let item of conversationList"
      ><span (click)="getMessages(this.item)" nbButton>{{ item.user }}</span>
      <span class="spacer"></span
      ><span
        ><button nbButton status="danger" (click)="deleteConversation(item)">
          <nb-icon icon="close"></nb-icon></button
      ></span></nb-list-item>
    </nb-list></nb-sidebar
  >
  <nb-layout-column *ngIf="conversationSelected; else selectConv">
    <nb-chat title="Chat UI" size="medium">
      <nb-chat-message
        *ngFor="let msg of messages"
        [type]="'text'"
        [message]="msg.text"
        [reply]="loggedInUser == msg.sender ? true : false"
        [sender]="msg.sender"
        [date]="msg.date"
      >
      </nb-chat-message>

      <nb-chat-form (send)="sendMessage($event)" [dropFiles]="true">
      </nb-chat-form> </nb-chat
  ></nb-layout-column>
  <ng-template #selectConv>
    <nb-card>Select Chat to continue..</nb-card> 
  </ng-template>
</nb-layout>
